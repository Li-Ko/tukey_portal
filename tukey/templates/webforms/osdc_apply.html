{% extends "base_web.html" %}

{% block meta_title %}OSDC Application{% endblock %}

{% block header %}
<header class="jumbotron subhead">
  <h2>Apply for a OSDC Account</h2>
</header>
{% endblock %}

{% block main %}
<div class="span10">
<p>
Please fill out the form below for access to the Open Science Data Cloud. Once your application is submitted, a member of our team will be in touch regarding your application as soon as possible.
</p>
<p>
  If you are interested in our Protected
  Data Cloud for The Cancer Genome Atlas please see the <a href="https://bionimbus-pdc.opensciencedatacloud.org/">Bionimbus PDC page</a>.
  Any questions about the application process can be directed to
  <a href="mailto:accounts@opencloudconsortium.org">accounts@opencloudconsortium.org</a>. Thank you.
</p>
</div>
<div class="span12">
<form action="/apply/" method="post" enctype="multipart/form-data" class="form-horizontal">{% csrf_token %}
  <fieldset>
    <div class="control-group {% if form.name.errors %}error{% endif %}">
      <label class="control-label" for="id_name">Name*</label>
      <div class="controls">
        {{ form.name }}
        <span class="help-inline">{{form.name.errors}}</span>
      </div>
    </div>

    <div class="control-group {% if form.email.errors %}error{% endif %}">
      <label class="control-label" for="id_email">E-mail*</label>
      <div class="controls">
        {{ form.email}}
        <span class="help-inline">{{form.email.errors}}</span>
        <span class="help-block-apply">The OSDC console uses federated login
for authentication. If you are at an academic institution we recommend
using that e-mail address. You can review the list of approved
institutions in the drop down menu of our <a href="/console">Console Login page</a>.  Please provide your primary institutional e-mail, not an alias. We also support Gmail and Yahoo logins, but only if you're unable to provide an appropriate institutional email.</span>
      </div>
    </div>


    <div class="control-group {% if form.organization.errors %}error{% endif %}">
      <label class="control-label" for="id_organization">Organization/University*</label>
      <div class="controls">
        {{ form.organization }}
        <span class="help-inline">{{form.organization.errors}}</span>
      </div>
    </div>

    <div class="control-group {% if form.webpage.errors %}error{% endif %}">
      <label class="control-label" for="id_webpage">Web Page</label>
      <div class="controls">
        {{ form.webpage }}
        <span class="help-inline">{{form.webpage.errors}}</span>
      </div>
    </div>

    <div class="control-group {% if form.phonenumber.errors %}error{% endif %}">
      <label class="control-label" for="id_phonenumber">Phone Number</label>
      <div class="controls">
        {{ form.phonenumber }}
        <span class="help-inline">{{form.phonenumber.errors}}</span>
      </div>
    </div>

    <div class="control-group {% if form.address.errors %}error{% endif %}">
      <label class="control-label" for="id_address">Address</label>
      <div class="controls">
        {{ form.address }}
        <span class="help-inline">{{form.address.errors}}</span>
      </div>
    </div>

    <div class="control-group control-group-min {% if form.systems.errors %}error{% endif %}">
      <label class="control-label" for="id_system">Access Requested*</label>
      <div class="controls">
        {{ form.systems }}
        <span class="help-inline"><a href="https://bionimbus-pdc.opensciencedatacloud.org/apply">Apply for access to Bionimbus-PDC (requires dbGaP access to TCGA)</a>{{form.system.errors}}</span>
      </div>
    </div>
    <div class="control-group extra_occy">
      <label class="control-label" for="id_system">Extra Forms for OCC-Y</label>
      <div class="controls">
        <span class="text-block">
    The OCC-Y Cluster is owned and operated by the OCC, and the equipment is donated by Yahoo! Inc. If you are applying for an account on the OCC-Y Cluster, please complete the following three application forms and email them to <a href="mailto:accounts@opencloudconsortium.org">accounts@opencloudconsortium.org</a>:
    <ul>
      <li>1) <a href="http://opencloudconsortium.org/files/2011/09/account-request.pdf">Account Request</a></li>
      <li>2) <a href="http://opencloudconsortium.org/files/2011/09/research-project-description.pdf">Research Project Description</a></li>
      <li>3) <a href="http://opencloudconsortium.org/files/2011/09/occ-y-cluster-terms-of-use.pdf">Terms of Use</a></li>
      </ul>

        </span>
      </div>
    </div>

    <div class="control-group extra_pubkey {% if form.pubkey.errors %}error{% endif %}">
      <label class="control-label" for="id_pubkey">SSH public key*</label>
      <div class="controls">
        <span class="text-block">
          Access to the OCC-Y and Skidmore clusters is only provided by SSH public/private key pairs, please provide your public key for access.
        </span>
        {{ form.pubkey }}
        <span class="help-inline">{{form.pubkey.errors}}</span>
      </div>
    </div>

    <div class="control-group {% if form.projectname.errors %}error{% endif %}">
      <label class="control-label" for="id_projectname">Project Name*</label>
      <div class="controls">
        {{ form.projectname }}
        <span class="help-inline">{{form.projectname.errors}}</span>
      </div>
    </div>

    <div class="control-group {% if form.projectlead.errors %}error{% endif %}">
      <label class="control-label" for="id_projectlead">Project Lead*</label>
      <div class="controls">
        {{ form.projectlead }}
        <span class="help-inline">{{form.projectlead.errors}}</span>
      </div>
    </div>

    <div class="control-group {% if form.projectlead_email.errors %}error{% endif %}">
      <label class="control-label" for="id_projectlead_email">Project Lead E-mail*</label>
      <div class="controls">
        {{ form.projectlead_email }}
        <span class="help-inline">{{form.projectlead_email.errors}}</span>
      </div>
    </div>

    <div class="control-group {% if form.projectdescr.errors %}error{% endif %}">
      <label class="control-label" for="id_projectdescr">Brief Project Description*</label>
      <div class="controls">
        {{ form.projectdescr }}
        <span class="help-inline">{{form.projectdescr.errors}}</span>
      </div>
    </div>

    <div class="control-group {% if form.resources.errors %}error{% endif %}">
      <label class="control-label" for="id_resources">Estimate of resources required (for example, how many CPUs and storage space)*
</label>
      <div class="controls">
        {{ form.resources }}
        <span class="help-inline">{{form.resources.errors}}</span>
      </div>
    </div>

    <div class="control-group {% if form.captcha.errors %}error{% endif %}">
      <label class="control-label" for="id_recaptcha">ReCaptcha</label>
      <div class="controls">
        {{ form.captcha }}
        <span class="help-inline">{{form.captcha.errors}}</span>
      </div>
    </div>

    <div class="control-group">
      <div class="controls">
	<button type="submit" class="btn btn-warning">Submit Application</button>
      </div>
    </div>
  </fieldset>
</form>
</div>
{% endblock %}
 
{% block js %}

{% include "horizon/_scripts.html" %}
<script type="text/javascript">
  $(document).ready(function() {

    function true_toggle(selector, condition){
      if (condition) {
        $(selector).show();
      }
      else {
        $(selector).hide();
      }
    }
        
    $("#nav-apply").attr('class', 'active');
    $("#id_systems_4").change(function() {
      true_toggle(".extra_occy", this.checked);
      true_toggle(".extra_pubkey", this.checked || $("#id_systems_3")[0].checked);
    }).change();
    $("#id_systems_3").change(function() {
      true_toggle(".extra_pubkey", this.checked || $("#id_systems_4")[0].checked);
    }).change();
  });
</script>
{% endblock %}
